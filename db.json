{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/miner.png","path":"miner.png","modified":1,"renderable":0},{"_id":"source/images/miner.png","path":"images/miner.png","modified":1,"renderable":0},{"_id":"themes/snippet/source/favicon.ico","path":"favicon.ico","modified":1,"renderable":1},{"_id":"themes/snippet/source/assets/highlight.pack.js","path":"assets/highlight.pack.js","modified":1,"renderable":1},{"_id":"themes/snippet/source/css/style.css","path":"css/style.css","modified":1,"renderable":1},{"_id":"themes/snippet/source/img/avatar.jpg","path":"img/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/snippet/source/img/branding.png","path":"img/branding.png","modified":1,"renderable":1},{"_id":"themes/snippet/source/img/head-img.jpg","path":"img/head-img.jpg","modified":1,"renderable":1},{"_id":"themes/snippet/source/js/app.js","path":"js/app.js","modified":1,"renderable":1},{"_id":"themes/snippet/source/js/search.js","path":"js/search.js","modified":1,"renderable":1},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.woff","path":"fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.woff2","path":"fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/snippet/source/img/loading.gif","path":"img/loading.gif","modified":1,"renderable":1},{"_id":"themes/snippet/source/fonts/FontAwesome.otf","path":"fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.eot","path":"fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.ttf","path":"fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.svg","path":"fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"source/miner.png","hash":"08d2c231f2f39871a959884c6092e8f94201f8a2","modified":1518156054928},{"_id":"source/比特币挖矿之全网难度.md","hash":"ccf354dcc741122a11f9117c554495db1e281500","modified":1518158871034},{"_id":"themes/snippet/.travis.yml","hash":"8b868cf1653a88ff06ebb776d7441c7a0e0f194b","modified":1518145343884},{"_id":"themes/snippet/LICENSE","hash":"c720db99e36a717d9808bf97b736612462e883dd","modified":1518145343884},{"_id":"themes/snippet/README.md","hash":"4c6f1d4892eb6fdb6e375ad5d1cd44b50a61e9e2","modified":1518145343884},{"_id":"themes/snippet/_config.yml","hash":"f5870e271d11a20e4c82f053bd4d647aae1a700f","modified":1518145343884},{"_id":"themes/snippet/_config1.yml","hash":"c65b4a58b94b9d53a75d5c46f6548e99c1f4c7d6","modified":1518145343888},{"_id":"themes/snippet/_travis.sh","hash":"6f28564a4a83aed0e5cbe2969a07fa28ada6e1f4","modified":1518145343888},{"_id":"themes/snippet/gulpfile.js","hash":"876e7ff1359e589ec99ad29a7182d076831a6655","modified":1518145343888},{"_id":"themes/snippet/package.json","hash":"2ac1a7806f43b75a7e0111e4f6b89008528a5407","modified":1518145343888},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1518074473468},{"_id":"source/_posts/比特币挖矿之全网难度.md","hash":"ccf354dcc741122a11f9117c554495db1e281500","modified":1518159070572},{"_id":"source/_posts/比特币挖矿之矿工任务.md","hash":"6825260a2b0f0b5186e40789d7ae8c2b18700f8a","modified":1518159231824},{"_id":"source/images/miner.png","hash":"08d2c231f2f39871a959884c6092e8f94201f8a2","modified":1518158208870},{"_id":"themes/snippet/languages/default.yml","hash":"3514b76f1f39009803abe47d1be22d5a6012e398","modified":1518145343888},{"_id":"themes/snippet/languages/zh-CN.yml","hash":"1baa7ea790a0011706bb7eca308b87dd9991ee8d","modified":1518145343888},{"_id":"themes/snippet/languages/zh-TW.yml","hash":"0c7591ce46476677c0903c160817454566f7e978","modified":1518145343888},{"_id":"themes/snippet/layout/archive.ejs","hash":"c42bc18ba370905c813981e3f6681e09b6a5857d","modified":1518145343888},{"_id":"themes/snippet/layout/category.ejs","hash":"ebd05ceb75be73e84ddf085ccfdb24c07162d0fa","modified":1518145343888},{"_id":"themes/snippet/layout/index.ejs","hash":"bc1a4dbde309dfc7618486a6e8ffc59604814124","modified":1518145343888},{"_id":"themes/snippet/layout/layout.ejs","hash":"a8a1c39ca9b0f961690dd0ac0f174475c9f71288","modified":1518145343888},{"_id":"themes/snippet/layout/page.ejs","hash":"3036c21565da3964f472c5867e6acc3453d0d316","modified":1518145343888},{"_id":"themes/snippet/layout/post.ejs","hash":"27bfa699d73929dace550d61f2010a9187213a0f","modified":1518145343888},{"_id":"themes/snippet/layout/tag.ejs","hash":"9b42656e75c58e7145e52408b51f017f6b6d9464","modified":1518145343888},{"_id":"themes/snippet/scripts/helper.js","hash":"836d369cf95ac51de957e09d396e6a8be1e84cf6","modified":1518145343888},{"_id":"themes/snippet/scripts/process.js","hash":"c2f0571899a6dd38bd944aaf47e21fc650f7d52e","modified":1518145343888},{"_id":"themes/snippet/source/favicon.ico","hash":"65f26147ea3433ffd64d3f18bf281af48dc5d06e","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/archive.ejs","hash":"17f5e3d17bc6bd9def8203ce1cb695b25603c12b","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/article-meta.ejs","hash":"d0606be951c92c5af7cb8ce68b43ea62390471bd","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/copyright.ejs","hash":"647c7d07a43414a92ba7a8b10a44d1284e2398a3","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/footer.ejs","hash":"1f0417b44c8617e0a4f500c17c639ccc1d329a5b","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/gallery.ejs","hash":"1b6b7859f395e10a3ecaa900de2d1312dc140def","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/head.ejs","hash":"1aea0e44f11d9f6f3e78f0da7dba0f35b910e6c3","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/header.ejs","hash":"b1ae20eb0901a77faffe338af959da29e17f8dbd","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/nav.ejs","hash":"4276098a03b1392d70cc73bbdbd49d1a299c1344","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/pagination.ejs","hash":"2ec88a22fd29e7cc97ca2a508eee7d168e338969","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/script.ejs","hash":"4deb486529a91e79cf067aeac7befaef79894d75","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/sidebar.ejs","hash":"f2ad132c8a0eae0a8b1f868bf4dda730ebeab82c","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/baidu_sitemap.ejs","hash":"f17db411dc1607e7d1eb133b7b7dfe5b575cabad","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/archive.ejs","hash":"906cc9b37734fd17b9c70d0089fd5a9b8178f6b1","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/category.ejs","hash":"1c6881cd5b6b034ddecda6c85a3337d17a03e9ff","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/friends.ejs","hash":"43b0404d608db1a237b3cf17ec8df7b2d24f9533","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/notification.ejs","hash":"6e75cc9fbee74d7cd4e9b26e62475f6113205585","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/search.ejs","hash":"2b6a0e7d07032920211dedec0be6844728e9b17f","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/social.ejs","hash":"f97313cdc1b495f7602e023b2ade5630acc4b667","modified":1518145343888},{"_id":"themes/snippet/layout/_widget/tagcloud.ejs","hash":"457b6081e2f24afd5c4c3a2d566c1f5940f3f21a","modified":1518145343888},{"_id":"themes/snippet/source/assets/highlight.pack.js","hash":"f39840759ec9afe56ec1ca30579d1f1c9d1f6026","modified":1518145343888},{"_id":"themes/snippet/source/css/style.css","hash":"e1fc8aa20dede36c08bde6330ab2a7f36e31aa48","modified":1518145343888},{"_id":"themes/snippet/source/img/avatar.jpg","hash":"237d249a214c2239e417ad18ecb9e597c75c4523","modified":1518145343896},{"_id":"themes/snippet/source/img/branding.png","hash":"18bee49d6a4c521ad230047c0b416245e009c2c9","modified":1518145343896},{"_id":"themes/snippet/source/img/head-img.jpg","hash":"a318d304665c2f410f79e6d2eb1b98119f675b4b","modified":1518145343896},{"_id":"themes/snippet/source/js/app.js","hash":"41fe02b22201e3be72dcebfb05cac8cbfae8d85f","modified":1518145343896},{"_id":"themes/snippet/source/js/search.js","hash":"b806e6ac8b92750113033d4ab0cc598953c3d5ac","modified":1518145343896},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1518145343896},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1518145343896},{"_id":"themes/snippet/source/img/loading.gif","hash":"6cea4dc953ac09fb744c7fedc12a1f4736faf8ec","modified":1518145343896},{"_id":"themes/snippet/layout/_partial/_head-sections/IE.ejs","hash":"567494a97ba2db7bb452294a9980b4d63b399ef0","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/_head-sections/seo.ejs","hash":"f80ec948f4f23763a1bf9b71efef6d6ebc6fc5d5","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/_head-sections/style.ejs","hash":"fc4d4fcfdc68719b4fa2b17117dd1a8638ca2299","modified":1518145343888},{"_id":"themes/snippet/layout/_partial/_head-sections/title.ejs","hash":"1482f56c44221cbc0d28ba06e377f4b55cdaacc2","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/analytics/baidu.ejs","hash":"eb4a75fb5ba9237d93430e727165d98ccda75a02","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/analytics/cnzz.ejs","hash":"8bfc514b178fafd81cc8181880afc5c9cbee02dc","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/analytics/google.ejs","hash":"91844d4521f97517ea9f169ee85b18c9d0d8cf17","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/analytics/index.ejs","hash":"6315abe9c31f4c4de719fa3cbfa2b1c6f294b0de","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/analytics/tencent.ejs","hash":"6a3d3c479ef08b735827caa63791879c6972b2ca","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/comments/changyan.ejs","hash":"202c94162ac2eeb0c93c8d2667c82b8705de6390","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/comments/disqus.ejs","hash":"7b5e05154be0408be110893439bfa33e262245de","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/comments/gitment.ejs","hash":"be5c261ae8a769747704a228aa35758120b814e1","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/comments/index.ejs","hash":"91ce022b7a379f3d1b53cf3b13612c2645a16139","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/comments/livere.ejs","hash":"6333308ba24ae6f2a3e73f4cdc1b42e024d19910","modified":1518145343888},{"_id":"themes/snippet/layout/_vendor/comments/uyan.ejs","hash":"2c2abe17f4f5c5ba1a9aaa948ef0a88d99f653f8","modified":1518145343888},{"_id":"themes/snippet/source/css/less/_highlight.less","hash":"c799cfa32c323c33a09569d326786874026fd1ef","modified":1518145343888},{"_id":"themes/snippet/source/css/less/_mixins.less","hash":"e89dc55772b5ae6bfd4cac3b5c32bf9ce73ac805","modified":1518145343888},{"_id":"themes/snippet/source/css/less/_style.less","hash":"c4bd243fe7470fcf2543c5fa970c359c5e5d45fe","modified":1518145343888},{"_id":"themes/snippet/source/css/less/_variable.less","hash":"b06c46ac56dbb8cd75ac13310479c643d5087d9b","modified":1518145343888},{"_id":"themes/snippet/source/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1518145343888},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1518145343892},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1518145343896},{"_id":"themes/snippet/source/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1518145343892}],"Category":[],"Data":[],"Page":[{"title":"比特币挖矿之全网难度","comments":0,"date":"2018-02-09T04:24:39.000Z","categories":null,"tags":null,"img":null,"_content":"\n2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？\n\n### 难度表示\n上文中提到，矿工在打包区块的时候，合格的区块应该满足:\n``` bash\nSHA256(SHA256(BlockHeader))<F(nBits)\n```\n这儿的nBits正是难度的一种压缩表达方式。\n前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)\n``` bash\ncurrent_target = bits_coefficient * 2^(8 * (bits_exponent-3))\n```\n以508230区块为例，此区块对应的bits为0x1761e9f8\n``` bash\ncurrent_target = 0x61e9f8 *2^(0x08*(0x17-3))\n               = 0x61e9f8 *2^(0x08*0x14)\n               = 0x61e9f8 *2^0xA0\n```\n按十进制计算为:\n``` bash\ncurrent_target = 6,416,888 * 2^160\n```\n转换为十六进制后为:\n``` bash\ncurrent_target =0x00000000000000000061e9f80000000000000000000000000000000000000000\n```\n而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。\n\n创世区块的bits值在代码中是写死的，具体代码如下:\n``` bash\ngenesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);\n```\n其中各参数含义如下:\n1231006505:时间戳，对应北京时间:2009/1/4 2:15:5\n2083236893:nNonce,随机数\n0x1d00ffff:bits,难度的压缩表示\n1:版本号\n50:区块奖励数\n\n### 难度调整\n上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？\n\n比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：\n``` bash\nNew Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)\n```\n通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。\n\n在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断\n1、当高度不是2016的倍数时，会直接返回上一个区块的bit\n2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。\n\n为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。\n\n","source":"比特币挖矿之全网难度.md","raw":"---\ntitle: 比特币挖矿之全网难度\ncomments: false\ndate: 2018-02-09 12:24:39\ncategories:\ntags:\nimg:\n---\n\n2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？\n\n### 难度表示\n上文中提到，矿工在打包区块的时候，合格的区块应该满足:\n``` bash\nSHA256(SHA256(BlockHeader))<F(nBits)\n```\n这儿的nBits正是难度的一种压缩表达方式。\n前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)\n``` bash\ncurrent_target = bits_coefficient * 2^(8 * (bits_exponent-3))\n```\n以508230区块为例，此区块对应的bits为0x1761e9f8\n``` bash\ncurrent_target = 0x61e9f8 *2^(0x08*(0x17-3))\n               = 0x61e9f8 *2^(0x08*0x14)\n               = 0x61e9f8 *2^0xA0\n```\n按十进制计算为:\n``` bash\ncurrent_target = 6,416,888 * 2^160\n```\n转换为十六进制后为:\n``` bash\ncurrent_target =0x00000000000000000061e9f80000000000000000000000000000000000000000\n```\n而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。\n\n创世区块的bits值在代码中是写死的，具体代码如下:\n``` bash\ngenesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);\n```\n其中各参数含义如下:\n1231006505:时间戳，对应北京时间:2009/1/4 2:15:5\n2083236893:nNonce,随机数\n0x1d00ffff:bits,难度的压缩表示\n1:版本号\n50:区块奖励数\n\n### 难度调整\n上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？\n\n比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：\n``` bash\nNew Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)\n```\n通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。\n\n在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断\n1、当高度不是2016的倍数时，会直接返回上一个区块的bit\n2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。\n\n为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。\n\n","updated":"2018-02-09T06:47:51.034Z","path":"比特币挖矿之全网难度.html","layout":"page","_id":"cjdfkt6jg0000jswo7n1wh6hg","content":"<p>2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？</p>\n<h3 id=\"难度表示\"><a href=\"#难度表示\" class=\"headerlink\" title=\"难度表示\"></a>难度表示</h3><p>上文中提到，矿工在打包区块的时候，合格的区块应该满足:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHA256(SHA256(BlockHeader))&lt;F(nBits)</span><br></pre></td></tr></table></figure></p>\n<p>这儿的nBits正是难度的一种压缩表达方式。<br>前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = bits_coefficient * 2^(8 * (bits_exponent-3))</span><br></pre></td></tr></table></figure></p>\n<p>以508230区块为例，此区块对应的bits为0x1761e9f8<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 0x61e9f8 *2^(0x08*(0x17-3))</span><br><span class=\"line\">               = 0x61e9f8 *2^(0x08*0x14)</span><br><span class=\"line\">               = 0x61e9f8 *2^0xA0</span><br></pre></td></tr></table></figure></p>\n<p>按十进制计算为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 6,416,888 * 2^160</span><br></pre></td></tr></table></figure></p>\n<p>转换为十六进制后为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target =0x00000000000000000061e9f80000000000000000000000000000000000000000</span><br></pre></td></tr></table></figure></p>\n<p>而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。</p>\n<p>创世区块的bits值在代码中是写死的，具体代码如下:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">genesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);</span><br></pre></td></tr></table></figure></p>\n<p>其中各参数含义如下:<br>1231006505:时间戳，对应北京时间:2009/1/4 2:15:5<br>2083236893:nNonce,随机数<br>0x1d00ffff:bits,难度的压缩表示<br>1:版本号<br>50:区块奖励数</p>\n<h3 id=\"难度调整\"><a href=\"#难度调整\" class=\"headerlink\" title=\"难度调整\"></a>难度调整</h3><p>上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？</p>\n<p>比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">New Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)</span><br></pre></td></tr></table></figure></p>\n<p>通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。</p>\n<p>在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断<br>1、当高度不是2016的倍数时，会直接返回上一个区块的bit<br>2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。</p>\n<p>为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？</p>\n<h3 id=\"难度表示\"><a href=\"#难度表示\" class=\"headerlink\" title=\"难度表示\"></a>难度表示</h3><p>上文中提到，矿工在打包区块的时候，合格的区块应该满足:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHA256(SHA256(BlockHeader))&lt;F(nBits)</span><br></pre></td></tr></table></figure></p>\n<p>这儿的nBits正是难度的一种压缩表达方式。<br>前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = bits_coefficient * 2^(8 * (bits_exponent-3))</span><br></pre></td></tr></table></figure></p>\n<p>以508230区块为例，此区块对应的bits为0x1761e9f8<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 0x61e9f8 *2^(0x08*(0x17-3))</span><br><span class=\"line\">               = 0x61e9f8 *2^(0x08*0x14)</span><br><span class=\"line\">               = 0x61e9f8 *2^0xA0</span><br></pre></td></tr></table></figure></p>\n<p>按十进制计算为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 6,416,888 * 2^160</span><br></pre></td></tr></table></figure></p>\n<p>转换为十六进制后为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target =0x00000000000000000061e9f80000000000000000000000000000000000000000</span><br></pre></td></tr></table></figure></p>\n<p>而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。</p>\n<p>创世区块的bits值在代码中是写死的，具体代码如下:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">genesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);</span><br></pre></td></tr></table></figure></p>\n<p>其中各参数含义如下:<br>1231006505:时间戳，对应北京时间:2009/1/4 2:15:5<br>2083236893:nNonce,随机数<br>0x1d00ffff:bits,难度的压缩表示<br>1:版本号<br>50:区块奖励数</p>\n<h3 id=\"难度调整\"><a href=\"#难度调整\" class=\"headerlink\" title=\"难度调整\"></a>难度调整</h3><p>上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？</p>\n<p>比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">New Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)</span><br></pre></td></tr></table></figure></p>\n<p>通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。</p>\n<p>在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断<br>1、当高度不是2016的倍数时，会直接返回上一个区块的bit<br>2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。</p>\n<p>为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。</p>\n"}],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2018-02-08T07:21:13.468Z","updated":"2018-02-08T07:21:13.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjdfkt6k20001jswok0fsou7r","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"比特币挖矿之全网难度","comments":0,"date":"2018-02-09T04:24:39.000Z","img":null,"_content":"\n2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？\n\n### 难度表示\n上文中提到，矿工在打包区块的时候，合格的区块应该满足:\n``` bash\nSHA256(SHA256(BlockHeader))<F(nBits)\n```\n这儿的nBits正是难度的一种压缩表达方式。\n前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)\n``` bash\ncurrent_target = bits_coefficient * 2^(8 * (bits_exponent-3))\n```\n以508230区块为例，此区块对应的bits为0x1761e9f8\n``` bash\ncurrent_target = 0x61e9f8 *2^(0x08*(0x17-3))\n               = 0x61e9f8 *2^(0x08*0x14)\n               = 0x61e9f8 *2^0xA0\n```\n按十进制计算为:\n``` bash\ncurrent_target = 6,416,888 * 2^160\n```\n转换为十六进制后为:\n``` bash\ncurrent_target =0x00000000000000000061e9f80000000000000000000000000000000000000000\n```\n而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。\n\n创世区块的bits值在代码中是写死的，具体代码如下:\n``` bash\ngenesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);\n```\n其中各参数含义如下:\n1231006505:时间戳，对应北京时间:2009/1/4 2:15:5\n2083236893:nNonce,随机数\n0x1d00ffff:bits,难度的压缩表示\n1:版本号\n50:区块奖励数\n\n### 难度调整\n上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？\n\n比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：\n``` bash\nNew Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)\n```\n通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。\n\n在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断\n1、当高度不是2016的倍数时，会直接返回上一个区块的bit\n2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。\n\n为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。\n\n","source":"_posts/比特币挖矿之全网难度.md","raw":"---\ntitle: 比特币挖矿之全网难度\ncomments: false\ndate: 2018-02-09 12:24:39\ncategories:\ntags:\nimg:\n---\n\n2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？\n\n### 难度表示\n上文中提到，矿工在打包区块的时候，合格的区块应该满足:\n``` bash\nSHA256(SHA256(BlockHeader))<F(nBits)\n```\n这儿的nBits正是难度的一种压缩表达方式。\n前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)\n``` bash\ncurrent_target = bits_coefficient * 2^(8 * (bits_exponent-3))\n```\n以508230区块为例，此区块对应的bits为0x1761e9f8\n``` bash\ncurrent_target = 0x61e9f8 *2^(0x08*(0x17-3))\n               = 0x61e9f8 *2^(0x08*0x14)\n               = 0x61e9f8 *2^0xA0\n```\n按十进制计算为:\n``` bash\ncurrent_target = 6,416,888 * 2^160\n```\n转换为十六进制后为:\n``` bash\ncurrent_target =0x00000000000000000061e9f80000000000000000000000000000000000000000\n```\n而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。\n\n创世区块的bits值在代码中是写死的，具体代码如下:\n``` bash\ngenesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);\n```\n其中各参数含义如下:\n1231006505:时间戳，对应北京时间:2009/1/4 2:15:5\n2083236893:nNonce,随机数\n0x1d00ffff:bits,难度的压缩表示\n1:版本号\n50:区块奖励数\n\n### 难度调整\n上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？\n\n比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：\n``` bash\nNew Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)\n```\n通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。\n\n在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断\n1、当高度不是2016的倍数时，会直接返回上一个区块的bit\n2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。\n\n为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。\n\n","slug":"比特币挖矿之全网难度","published":1,"updated":"2018-02-09T06:51:10.572Z","layout":"post","photos":[],"link":"","_id":"cjdfkt6k70002jswo268fuf7g","content":"<p>2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？</p>\n<h3 id=\"难度表示\"><a href=\"#难度表示\" class=\"headerlink\" title=\"难度表示\"></a>难度表示</h3><p>上文中提到，矿工在打包区块的时候，合格的区块应该满足:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHA256(SHA256(BlockHeader))&lt;F(nBits)</span><br></pre></td></tr></table></figure></p>\n<p>这儿的nBits正是难度的一种压缩表达方式。<br>前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = bits_coefficient * 2^(8 * (bits_exponent-3))</span><br></pre></td></tr></table></figure></p>\n<p>以508230区块为例，此区块对应的bits为0x1761e9f8<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 0x61e9f8 *2^(0x08*(0x17-3))</span><br><span class=\"line\">               = 0x61e9f8 *2^(0x08*0x14)</span><br><span class=\"line\">               = 0x61e9f8 *2^0xA0</span><br></pre></td></tr></table></figure></p>\n<p>按十进制计算为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 6,416,888 * 2^160</span><br></pre></td></tr></table></figure></p>\n<p>转换为十六进制后为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target =0x00000000000000000061e9f80000000000000000000000000000000000000000</span><br></pre></td></tr></table></figure></p>\n<p>而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。</p>\n<p>创世区块的bits值在代码中是写死的，具体代码如下:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">genesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);</span><br></pre></td></tr></table></figure></p>\n<p>其中各参数含义如下:<br>1231006505:时间戳，对应北京时间:2009/1/4 2:15:5<br>2083236893:nNonce,随机数<br>0x1d00ffff:bits,难度的压缩表示<br>1:版本号<br>50:区块奖励数</p>\n<h3 id=\"难度调整\"><a href=\"#难度调整\" class=\"headerlink\" title=\"难度调整\"></a>难度调整</h3><p>上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？</p>\n<p>比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">New Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)</span><br></pre></td></tr></table></figure></p>\n<p>通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。</p>\n<p>在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断<br>1、当高度不是2016的倍数时，会直接返回上一个区块的bit<br>2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。</p>\n<p>为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>2018年2月7日，比特币全网难度再次提升10.43%，而这对于正经历币价大跌的矿工来说，挖矿难度的提升，意味着挖矿收益进一步下降。那么在比特币系统中，挖矿难度究竟是如何调整的呢？</p>\n<h3 id=\"难度表示\"><a href=\"#难度表示\" class=\"headerlink\" title=\"难度表示\"></a>难度表示</h3><p>上文中提到，矿工在打包区块的时候，合格的区块应该满足:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHA256(SHA256(BlockHeader))&lt;F(nBits)</span><br></pre></td></tr></table></figure></p>\n<p>这儿的nBits正是难度的一种压缩表达方式。<br>前两位十六进制数字为幂(bits_exponent),后六位为系数(bits_coefficient)<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = bits_coefficient * 2^(8 * (bits_exponent-3))</span><br></pre></td></tr></table></figure></p>\n<p>以508230区块为例，此区块对应的bits为0x1761e9f8<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 0x61e9f8 *2^(0x08*(0x17-3))</span><br><span class=\"line\">               = 0x61e9f8 *2^(0x08*0x14)</span><br><span class=\"line\">               = 0x61e9f8 *2^0xA0</span><br></pre></td></tr></table></figure></p>\n<p>按十进制计算为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target = 6,416,888 * 2^160</span><br></pre></td></tr></table></figure></p>\n<p>转换为十六进制后为:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">current_target =0x00000000000000000061e9f80000000000000000000000000000000000000000</span><br></pre></td></tr></table></figure></p>\n<p>而记录到区块链上的该高度对应的区块头的hash值为0000000000000000003692a92ed937e4e0a5f247e27feeeb4df383e6d9c2bd94,满足要求。</p>\n<p>创世区块的bits值在代码中是写死的，具体代码如下:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">genesis = CreateGenesisBlock(1231006505, 2083236893, 0x1d00ffff, 1, 50 * COIN);</span><br></pre></td></tr></table></figure></p>\n<p>其中各参数含义如下:<br>1231006505:时间戳，对应北京时间:2009/1/4 2:15:5<br>2083236893:nNonce,随机数<br>0x1d00ffff:bits,难度的压缩表示<br>1:版本号<br>50:区块奖励数</p>\n<h3 id=\"难度调整\"><a href=\"#难度调整\" class=\"headerlink\" title=\"难度调整\"></a>难度调整</h3><p>上面提到，比特币的挖矿难度是可调整的，那么这个难度为什么需要调整？由谁来调整？如何调整？</p>\n<p>比特币系统平均每10分钟生成一个区块，而全网的算力是变化的，为了应对全网算力可能在一定时间内发生暴增或者骤减的情况，保持每10分钟产生一个新区块的产生速率，比特币采用这样一种难度调整机制:每2016个区块，所有节点调整一次难度，难度的调整公式如下：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">New Difficulty = Old Difficulty * (Actual Time of Last 2016 Blocks / 20160 minutes)</span><br></pre></td></tr></table></figure></p>\n<p>通过上述公式，比特币系统便能实现当区块产生速率比10分钟要快时，增加难度。如果发现比10分钟慢时，则降低难度。当然这种调整无法及时应对币价暴跌导致全网算力骤减的情况。</p>\n<p>在矿工每次打包新的区块的时候，会对下一个区块的高度进行判断<br>1、当高度不是2016的倍数时，会直接返回上一个区块的bit<br>2、当高度是2016的倍数时，会根据上面提到的难度调整公式进行计算。</p>\n<p>为了防止难度的变化过快，每隔周期的调整幅度必须有一定的限制。如果调整幅度大于4倍，则按4倍调整，因此当难度变化过快时，可能要经过几个2016区块周期才会完成。</p>\n"},{"title":"比特币挖矿之矿工任务","comments":0,"date":"2018-02-09T06:52:06.000Z","img":null,"_content":"\n{% asset_img miner.png mining%} \n","source":"_posts/比特币挖矿之矿工任务.md","raw":"---\ntitle: 比特币挖矿之矿工任务\ncomments: false\ndate: 2018-02-09 14:52:06\ncategories:\ntags:\nimg:\n---\n\n{% asset_img miner.png mining%} \n","slug":"比特币挖矿之矿工任务","published":1,"updated":"2018-02-09T06:53:51.824Z","layout":"post","photos":[],"link":"","_id":"cjdfkt6ka0003jswou9dr7nhq","content":" \n","site":{"data":{}},"excerpt":"","more":" \n"}],"PostAsset":[],"PostCategory":[],"PostTag":[],"Tag":[]}}